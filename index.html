<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>C·ªù Ca R√¥ 5 √î üé≤</title>
<style>
  body {
    background: #fce4ec;
    font-family: "Poppins", sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    margin: 0;
  }

  h1 {
    color: #e91e63;
    margin-bottom: 10px;
  }

  #board {
    display: grid;
    grid-template-columns: repeat(15, 30px);
    grid-template-rows: repeat(15, 30px);
    gap: 2px;
  }

  .cell {
    width: 30px;
    height: 30px;
    background: #fff;
    border: 1px solid #ccc;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
    cursor: pointer;
    transition: background 0.3s;
  }

  .cell:hover {
    background: #f8bbd0;
  }

  .x { color: #e91e63; }
  .o { color: #3f51b5; }

  #status {
    margin-top: 15px;
    color: #555;
    font-size: 18px;
  }

  button {
    margin-top: 10px;
    padding: 8px 16px;
    background: #e91e63;
    color: #fff;
    border: none;
    border-radius: 5px;
    font-size: 16px;
  }
</style>
</head>
<body>
  <h1>C·ªù Ca R√¥ 5 √î</h1>
  <div id="board"></div>
  <div id="status">L∆∞·ª£t c·ªßa b·∫°n (X)</div>
  <button onclick="resetGame()">Ch∆°i l·∫°i</button>

<script>
const size = 15;
const board = Array(size).fill().map(() => Array(size).fill(""));
let gameOver = false;
const boardDiv = document.getElementById("board");
const statusDiv = document.getElementById("status");

function renderBoard() {
  boardDiv.innerHTML = "";
  for (let i = 0; i < size; i++) {
    for (let j = 0; j < size; j++) {
      const cell = document.createElement("div");
      cell.classList.add("cell");
      if (board[i][j] === "X") cell.classList.add("x");
      if (board[i][j] === "O") cell.classList.add("o");
      cell.textContent = board[i][j];
      cell.addEventListener("click", () => playerMove(i, j));
      boardDiv.appendChild(cell);
    }
  }
}

function playerMove(i, j) {
  if (board[i][j] || gameOver) return;
  board[i][j] = "X";
  renderBoard();
  if (checkWin("X")) {
    statusDiv.textContent = "B·∫°n th·∫Øng! üéâ";
    gameOver = true;
    return;
  }
  statusDiv.textContent = "M√°y ƒëang suy nghƒ©...";
  setTimeout(aiMove, 400);
}

function aiMove() {
  if (gameOver) return;
  let emptyCells = [];
  for (let i = 0; i < size; i++) {
    for (let j = 0; j < size; j++) {
      if (!board[i][j]) emptyCells.push([i, j]);
    }
  }
  if (emptyCells.length === 0) {
    statusDiv.textContent = "H√≤a!";
    gameOver = true;
    return;
  }
  // M√°y ch·ªçn √¥ ng·∫´u nhi√™n g·∫ßn √¥ ng∆∞·ªùi ch∆°i
  let [i, j] = emptyCells[Math.floor(Math.random() * emptyCells.length)];
  board[i][j] = "O";
  renderBoard();
  if (checkWin("O")) {
    statusDiv.textContent = "M√°y th·∫Øng üòé";
    gameOver = true;
    return;
  }
  statusDiv.textContent = "L∆∞·ª£t c·ªßa b·∫°n (X)";
}

function checkWin(symbol) {
  const directions = [
    [1, 0], [0, 1], [1, 1], [1, -1]
  ];
  for (let i = 0; i < size; i++) {
    for (let j = 0; j < size; j++) {
      if (board[i][j] !== symbol) continue;
      for (const [dx, dy] of directions) {
        let count = 1;
        for (let k = 1; k < 5; k++) {
          const x = i + dx * k, y = j + dy * k;
          if (x < 0 || y < 0 || x >= size || y >= size || board[x][y] !== symbol)
            break;
          count++;
        }
        if (count >= 5) return true;
      }
    }
  }
  return false;
}

function resetGame() {
  for (let i = 0; i < size; i++) board[i].fill("");
  gameOver = false;
  statusDiv.textContent = "L∆∞·ª£t c·ªßa b·∫°n (X)";
  renderBoard();
}

renderBoard();
</script>
</body>
</html>
